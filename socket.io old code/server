// this used express - a framework for node js. we shouldn't use exactly this


let io = require('socket.io')(http); //require socket.io module and pass the http object (the server)

function readSerialData(data) {
	if (data == "waved") {
		io.emit("waved");
	}
}

io.sockets.on('connection', function (socket) {// WebSocket Connection
	let address = socket.handshake.address;
	console.log("Connection from " + socket.handshake.headers['x-forwarded-for']); //reveales client ip
	if (!cameraStarted) {
    //do stuff
	}

	socket.on("blink", function () {
		myPort.write('b');
	});

	socket.on("disconnect", function () {
		console.log(socket.handshake.headers['x-forwarded-for'] + " has disconnected");
	});
});
